<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Portfolio — Ken</title>

    <!-- Preconnect and preload -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet" />
    <link rel="preload" as="image" href="https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1600&q=60" />

    <style>
      :root{
        --bg-light: #ffffff;
        --bg-blue: #0504A4;
        --accent-1: #5b8cff;
        --accent-2: #2b5fe0;
        --text: #0b0b0b;
        --muted: #6b7280;
        --card-bg: #ffffff;
        --max-width: 1100px;
        --nav-start: #4b63ff;
        --nav-mid:  #2439d1;
        --nav-end:  #0504A4;
        --nav-accent-shadow: rgba(5,4,164,0.28);
        --nav-inactive-bg: rgba(255,255,255,0.06);
        --nav-inactive-color: var(--muted);
        --nav-text-active: #ffffff;
        --nav-focus: rgba(5,4,164,0.18);
      }

      *{box-sizing:border-box}
      html,body{height:100%}
      html { scroll-behavior: smooth; }
      body{
        margin:0;
        font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
        color:var(--text);
        background: none;
        -webkit-font-smoothing:antialiased;
        -moz-osx-font-smoothing:grayscale;
        display:flex;
        justify-content:center;
        padding:32px 16px;
        position:relative;
        background-color:var(--bg-light);
      }

      /* fixed background layer that never scrolls (left white → right deep blue) */
      body::before{
        content: "";
        position: fixed;
        inset: 0;
        z-index: -1;
        background: linear-gradient(135deg, var(--bg-light) 50%, var(--bg-blue) 50%);
        background-size: cover;
        background-repeat: no-repeat;
        pointer-events: none;
      }

      .container{
        width:100%;
        max-width:var(--max-width);
        background:transparent;
      }

      header{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:16px;
        margin-bottom:18px;
      }
      .brand{ display:flex; align-items:center; gap:12px; }
      .brand-name{ font-weight:800; font-size:18px; color:var(--muted); }

      header nav{ display:flex; gap:10px; align-items:center; }

      .nav-btn{
        position:relative;
        display:inline-block;
        padding:9px 16px;
        border-radius:999px;
        text-decoration:none;
        color:var(--nav-inactive-color);
        background:var(--nav-inactive-bg);
        font-weight:700;
        letter-spacing:0.2px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.06);
        transition: transform .14s ease, box-shadow .14s ease, background .18s ease, color .14s ease;
        -webkit-tap-highlight-color: transparent;
        overflow:hidden;
      }
      .nav-btn:hover{ transform: translateY(-3px); box-shadow: 0 14px 36px rgba(0,0,0,0.12); }
      .nav-btn:focus{ outline: 3px solid var(--nav-focus); outline-offset:4px; border-radius:999px; }

      .nav-btn.active,
      .nav-btn[aria-current="page"]{
        background: linear-gradient(180deg, var(--nav-start) 0%, var(--nav-mid) 48%, var(--nav-end) 100%);
        color: var(--nav-text-active);
        box-shadow: 0 18px 48px var(--nav-accent-shadow);
        transform: translateY(-2px);
        border: 1px solid rgba(255,255,255,0.06);
      }

      @media (max-width:600px){
        header nav{ flex-direction:column; gap:8px; }
        .nav-btn{ width:220px; text-align:center; }
      }

      /* Hero */
      .hero{ display:grid; grid-template-columns: 220px 1fr; gap:20px; align-items:center; margin-bottom:28px; }
      .profile{ background:var(--card-bg); padding:18px; border-radius:14px; box-shadow:0 12px 30px rgba(0,0,0,0.06); display:flex; flex-direction:column; align-items:center; text-align:center; }
      .avatar{
        width:140px;
        height:140px;
        border-radius:50%;
        overflow:hidden;
        margin-bottom:12px;
        display:flex;
        align-items:center;
        justify-content:center;
        background:linear-gradient(135deg,var(--accent-1),var(--accent-2));
      }
      .avatar img{
        width:100%;
        height:100%;
        object-fit:cover;
        display:block;
        border-radius:50%;
      }
      .name{ font-size:20px; font-weight:800; margin:6px 0; }
      .role{ color:var(--muted); font-weight:700; font-size:13px; margin-bottom:8px; }
      .socials{ display:flex; gap:8px; margin-top:8px; }

      .intro{ background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.98)); padding:20px; border-radius:14px; box-shadow:0 12px 30px rgba(0,0,0,0.04); }
      .intro h1{ margin:0 0 8px 0; font-size:28px; }
      .intro p{ margin:0; color:var(--muted); line-height:1.5; }

      /* Projects */
      .projects{ margin-top:8px; display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:18px; }
      .project{
        background:var(--card-bg);
        border-radius:12px;
        overflow:hidden;
        box-shadow:0 10px 30px rgba(0,0,0,0.06);
        display:flex;
        flex-direction:column;
        min-height:220px;
        cursor:pointer;
        content-visibility: auto;
        contain-intrinsic-size: 240px;
      }
      .project .media{
        height:140px;
        background-size:cover;
        background-position:center;
        background-repeat:no-repeat;
        background-color:#f3f4f6;
        aspect-ratio: 16 / 9;
      }
      .project.large .media{ height:320px; aspect-ratio: 16 / 9; }
      .project .meta{ padding:12px 14px; display:flex; flex-direction:column; gap:8px; flex:1; }
      .project .title{ font-weight:800; font-size:16px; margin:0; }
      .project .desc{ color:var(--muted); font-size:13px; margin:0; flex:1; }

      /* Programs */
      .programs{ margin-top:8px; display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:18px; }

      /* Media-only grid */
      .media-showcase{ margin-top:28px; display:grid; gap:18px; }
      .media-row{ display:grid; grid-template-columns: repeat(3, 1fr); gap:18px; align-items:start; }
      .media-card{ background:var(--card-bg); border-radius:12px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.06); height:225px; display:flex; align-items:center; justify-content:center; content-visibility: auto; contain-intrinsic-size: 225px; }
      .media-card img, .media-card video{ width:100%; height:100%; object-fit:cover; display:block; }

      /* Updated .media-large to remove white card background */
      .media-large{
        background: transparent;
        border-radius: 0;
        overflow: visible;
        box-shadow: none;
        height:525px;
        display:flex;
        align-items:center;
        justify-content:center;
        content-visibility: auto;
        contain-intrinsic-size: 525px;
      }
      .media-large img,
      .media-large video{
        width:100%;
        height:100%;
        object-fit:cover;
        display:block;
        background: transparent;
        border-radius: 0;
      }

      /* Modal and gallery styles */
      .overlay{ position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; align-items:center; justify-content:center; z-index:60; padding:20px; }
      .overlay.open{ display:flex; }
      .modal{ width:100%; max-width:1000px; background:#fff; border-radius:12px; overflow:hidden; box-shadow:0 30px 80px rgba(0,0,0,0.3); display:grid; grid-template-columns: 1fr 360px; gap:0; max-height:90vh; }
      .modal .gallery{ background:#000; min-height:320px; display:flex; flex-direction:column; align-items:center; justify-content:center; position:relative; color:#fff; }
      .modal .gallery .main-wrap{ width:100%; height:60vh; max-height:60vh; display:flex; align-items:center; justify-content:center; position:relative; background:#111; overflow:hidden; }
      .modal .gallery .stage{ position:relative; width:100%; height:100%; overflow:hidden; z-index:1; }
      .modal .gallery .media-item{ position:absolute; top:0; left:0; width:100%; height:100%; display:flex; align-items:center; justify-content:center; transform: translateX(0%); transition: transform 320ms cubic-bezier(.2,.9,.2,1); will-change: transform, opacity; background:#111; z-index:2; }
      .modal .gallery .media-item img, .modal .gallery .media-item video{ width:100%; height:100%; object-fit:cover; display:block; }
      .modal .gallery .nav{ position: absolute; top: 50%; left: 0; right: 0; transform: translateY(-50%); display: flex; justify-content: space-between; padding: 0 12px; pointer-events: none; z-index: 70; }
      .modal .gallery button.arrow{ pointer-events: auto; background: rgba(255,255,255,0.95); border: none; padding: 10px 12px; border-radius: 10px; cursor: pointer; font-weight: 800; color: #111; box-shadow: 0 6px 18px rgba(0,0,0,0.12); width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; user-select: none; }
      .modal .gallery .thumbs{ width:100%; display:flex; gap:8px; padding:12px; overflow:auto; background:rgba(0,0,0,0.05); box-sizing:border-box; }
      .modal .gallery .thumb{ width:92px; height:64px; background-size:cover; background-position:center; border-radius:6px; cursor:pointer; opacity:0.6; border:2px solid transparent; flex:0 0 auto; }
      .modal .gallery .thumb.active{ opacity:1; border-color:rgba(255,255,255,0.9); }
      .modal .details{ padding:18px; overflow:auto; background:#fff; }
      .modal .details h3{ margin:0 0 8px 0; }
      .modal .close{ position:absolute; right:12px; top:12px; background:rgba(255,255,255,0.9); border:none; padding:8px; border-radius:8px; cursor:pointer; font-weight:700; }

      footer{ margin-top:28px; color:var(--muted); font-size:13px; text-align:center; }

      @media (max-width:1100px){ .media-row{ grid-template-columns: repeat(2, 1fr); } .programs{ grid-template-columns: repeat(2, 1fr); } }
      @media (max-width:720px){ .hero{ grid-template-columns: 1fr; } .modal{ grid-template-columns: 1fr; max-width:720px; } .media-row{ grid-template-columns: 1fr; } .media-large{ height:325px; } .project.large .media{ height:220px; } .modal .gallery .main-wrap{ height:40vh; max-height:40vh; } }
      @media (max-width:560px){ .profile{ padding:14px; } .avatar{ width:120px; height:120px; } .intro h1{ font-size:22px; } .modal .gallery button.arrow{ width:48px; height:48px; padding:12px; } }

      /* --- Updated styles for longer scrollable highlights --- */
      .modal .details{
        padding:18px;
        overflow: auto;
        background:#fff;
        -webkit-overflow-scrolling: touch;
      }

      /* Larger, scrollable highlights container to accommodate longer lists */
      .modal .details .highlights-list{
        margin-top:12px;
        color:var(--muted);
        max-height:320px; /* increased to allow more content before scrolling */
        overflow-y:auto;
        padding-right:8px;
        border-top:1px solid rgba(0,0,0,0.04);
        padding-top:12px;
      }

      /* Tighter limits on small screens */
      @media (max-width:720px){
        .modal{ max-width:720px; }
        .modal .details{ max-height: calc(90vh - 120px); }
        .modal .details .highlights-list{ max-height:220px; }
      }

      @media (max-width:420px){
        .modal .details{ max-height: calc(85vh - 100px); }
        .modal .details .highlights-list{ max-height:160px; }
      }

      /* Optional: nicer thin scrollbar for WebKit */
      .modal .details .highlights-list::-webkit-scrollbar{ width:8px; }
      .modal .details .highlights-list::-webkit-scrollbar-thumb{ background:rgba(0,0,0,0.08); border-radius:6px; }
    </style>
  </head>

  <body>
    <div class="container" role="main" id="home">
      <header>
        <div class="brand" aria-hidden="false"></div>

        <nav aria-label="Main">
          <a href="index.html" class="nav-btn">Home</a>
          <a href="project-home.html" class="nav-btn active" aria-current="page">Projects</a>
          <a href="#about" class="nav-btn">About Me</a>
        </nav>
      </header>

      <section class="hero" aria-label="Profile">
        <aside class="profile" aria-label="Profile card">
          <!-- Updated avatar: replace src with your actual image URL -->
          <div class="avatar" role="img" aria-label="Profile photo">
            <img
              src="https://dl.dropboxusercontent.com/scl/fi/pilhzirwy9849gzrrhods/resume-pic_enhanced.webp?rlkey=qyoym6db4egf2t7x7s6lkpgaw&st=exxl1wl5&dl=0"
              alt="Ken Delos Santos Fabros profile photo"
              width="140"
              height="140"
              loading="lazy"
              decoding="async"
            />
          </div>

          <div class="name">Ken Delos Santos Fabros</div>
          <div class="role"></div>
          <div class="socials" aria-hidden="false">
            <a href="#" aria-label="Instagram" title="Instagram" style="text-decoration:none; color:var(--muted)">Instagram</a>
            <a href="#" aria-label="Twitter" title="LinkedIn" style="text-decoration:none; color:var(--muted)"></a>
            <a href="#" aria-label="GitHub" title="GitHub" style="text-decoration:none; color:var(--muted)">GitHub</a>
          </div>
        </aside>

        <div class="intro" aria-label="Introduction" id="about">
          <h1>About Me</h1>
          <p>Hi, I am <strong>Ken Delos Santos Fabros</strong>. A CITCS Student from the University of the Cordilleras. I'm passionate about sharing my journey and work. This is a space where I express my creativity and showcase my accomplishments. Feel free to explore and get to know me better.</p>
          <p style="margin-top:12px">My philosophy "Quote":</p>
          <p>In the cosmic ballet of existence, we find ourselves continuously seeking meaning, purpose, and connection. Our philosophy of harmonious existence is grounded in the principle that every individual, no matter their background, beliefs, or circumstances, contributes uniquely to the grand tapestry of life.</p>
        </div>
      </section>

      <section aria-label="Projects">
        <h2 style="margin:0 0 12px 0; font-size:18px; font-weight:800">Selected Projects</h2>
        <div class="projects" id="projects">
          <!-- Project 1: Achievements (updated with longer highlights) -->
          <article class="project large"
                   data-title="Achievements"
                   data-desc="Academic work is a human act of curiosity and courage; it asks us to listen, question, and grow. True scholarship honors mistakes as much as discoveries, because both teach us how to be more human."
                   data-images='["https://dl.dropboxusercontent.com/scl/fi/zp4tggj6vllhmew1txvpy/IMG_20250204_220354.webp?rlkey=gpgtnxl0gskr2byutd4x67nha&st=fixyz0df&dl=0"]'
                   data-highlights='[
                     "Received a Diploma for completing the requirements of Senior High School, Grade 12 (2024-2025)",
                     "Received the Certificate of Academic Excellence Award and graduated with Honors, Grade 12 (2024-2025)",
                     "Earned a Work Immersion Certificate from DICT C.A.R, Grade 12 (2024-2025)",
                     "Academic Awardee From Grade 7 until Grade 10",
                     "Graduate of PCNHS",
                     "Academic Achiever in Grade 12",
                     "Graduate from the University of the Cordilleras in 2024"
                   ]'>
            <div class="media" data-bg="https://dl.dropboxusercontent.com/scl/fi/g8pe6eadqolzh4eyfwfo3/Screenshot-2025-12-04-000350.webp?rlkey=8poutolxmxh55mskqm4clxbhj&st=qqmbnt8d&dl=0" role="img" aria-label="Achievements image"></div>
            <div class="meta">
              <h3 class="title">Achievements</h3>
              <p class="desc">Here you'll find the achievements I've acquired.</p>
            </div>
          </article>

          <!-- Project 2 -->
          <article class="project large"
                   data-title="Projects"
                   data-desc="Artistic and Inspiring Works — This page showcases my projects from junior and senior high school through to the present, highlighting creative growth, key achievements, and the ideas that shaped my journey."
                   data-images='["https://dl.dropboxusercontent.com/scl/fi/5gpq1ocmeb1zabsiigu1z/Screenshot-2025-12-03-233450.webp?rlkey=v5riw1ehsouhigcm5q8yb7v53&st=0p5vtfq4&dl=0","https://dl.dropboxusercontent.com/scl/fi/yzng9ahaffc4u86azj78q/abstract-art-no.2-varation-final-done.webp?rlkey=mnny0uyvyp3y2v058cp8pm23u&st=5ddfqr19&dl=0","https://dl.dropboxusercontent.com/scl/fi/i382gqw2nzmft8kvusew7/abstarct-background-ps-export-final.webp?rlkey=toxf95xvccptcr9lcf5lyalon&st=ath0li21&dl=0","https://dl.dropboxusercontent.com/scl/fi/w4gqj47m5xtb62v7tfg2l/Screenshot-2024-11-28-170142.webp?rlkey=0g9vcba82jvr17vej1h7pxupd&st=vsa9tkke&dl=0","https://dl.dropboxusercontent.com/scl/fi/uko3rpfi0svp9h8f0fdn2/Screenshot-2025-12-03-235753.webp?rlkey=t41x5hwkqbqtgwakgwfekahun&st=p96f4i5u&dl=0"]'>
            <div class="media" data-bg="https://dl.dropboxusercontent.com/scl/fi/5gpq1ocmeb1zabsiigu1z/Screenshot-2025-12-03-233450.webp?rlkey=v5riw1ehsouhigcm5q8yb7v53&st=0p5vtfq4&dl=0" role="img" aria-label="Projects image"></div>
            <div class="meta">
              <h3 class="title">Projects</h3>
              <p class="desc">Here you’ll find a selection of my work. Explore my projects to learn more about what I do.</p>
            </div>
          </article>

          <!-- Project 3 -->
          <article class="project large"
                   data-title="My Hobbies"
                   data-desc="I chase light and quiet moments, turning ordinary scenes into lingering visual stories. That quote depicts my art itself"
                   data-images='["https://dl.dropboxusercontent.com/scl/fi/lyn3uxx4nw5i6et93y8np/329499139_1622334898278996_4171053628367841960_n.webp?rlkey=d2f8eltuqii1n5hq6f867s566&st=djofau4i&dl=0","https://dl.dropboxusercontent.com/scl/fi/2lstn5budn0q2t5sfj7z5/329785655_964051695037498_1346925642961946229_n.webp?rlkey=8zcpcskvlum2v7a39npipkj6h&st=986r19ha&dl=0","https://dl.dropboxusercontent.com/scl/fi/d51shgcl2zoesva5c8avx/340641356_738845294571244_1138016351730339913_n.webp?rlkey=aez1ducpsddy0hgz3b9uqayfd&st=rjz6uz5l&dl=0","https://dl.dropboxusercontent.com/scl/fi/z77p7amj2wwknsivnizvh/341933494_962319381792372_3535160102446161496_n.webp?rlkey=54hnyq19aq8un7uq2r4e4hbus&st=bd31u6m4&dl=0","https://dl.dropboxusercontent.com/scl/fi/iizjhqsxsunss09x1rj8r/342335417_743817660624178_944112588714985992_n.webp?rlkey=dm4px8e0gcu3d19i89s70euw7&st=jkzohd2c&dl=0"]'>
            <div class="media" data-bg="https://dl.dropboxusercontent.com/scl/fi/lyn3uxx4nw5i6et93y8np/329499139_1622334898278996_4171053628367841960_n.webp?rlkey=d2f8eltuqii1n5hq6f867s566&st=djofau4i&dl=0" role="img" aria-label="Hobbies image"></div>
            <div class="meta">
              <h3 class="title">Hobbies</h3>
              <p class="desc">Marketing site rebuild with performance and accessibility improvements.</p>
            </div>
          </article>
        </div>
      </section>

      <section aria-label="Programs">
        <h2 style="margin:18px 0 12px 0; font-size:18px; font-weight:800">Selected Programs</h2>
        <div class="programs" id="programs">
          <article class="project program" data-title="Program One" data-desc="A compact program focused on onboarding flows." data-images='["https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=1200&q=60"]'>
            <div class="media" data-bg="https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=1200&q=60" role="img" aria-label="Program One image"></div>
            <div class="meta">
              <h3 class="title">Program One</h3>
              <p class="desc">Compact program focused on onboarding flows and micro-interactions.</p>
            </div>
          </article>

          <article class="project program" data-title="Program Two" data-desc="A toolkit for data visualization and reporting." data-images='["https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=1200&q=60"]'>
            <div class="media" data-bg="https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=1200&q=60" role="img" aria-label="Program Two image"></div>
            <div class="meta">
              <h3 class="title">Program Two</h3>
              <p class="desc">Toolkit for building clear, performant data visualizations and reports.</p>
            </div>
          </article>

          <article class="project program" data-title="Program Three" data-desc="Accessibility-first UI components and patterns." data-images='["https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=1200&q=60"]'>
            <div class="media" data-bg="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=1200&q=60" role="img" aria-label="Program Three image"></div>
            <div class="meta">
              <h3 class="title">Program Three</h3>
              <p class="desc">A set of accessibility-first UI components and interaction patterns.</p>
            </div>
          </article>
        </div>
      </section>

      <section class="media-showcase" aria-label="Media showcase">
        <h2 style="margin:0 0 12px 0; font-size:18px; font-weight:800">Media Showcase</h2>

        <div class="media-row" aria-hidden="false">
          <div class="media-card" aria-label="Media card 1">
            <picture>
              <source type="image/avif" data-srcset="https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=400&q=60&fm=avif 400w, https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=800&q=60&fm=avif 800w, https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=1200&q=60&fm=avif 1200w" />
              <source type="image/webp" data-srcset="https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=400&q=60&fm=webp 400w, https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=800&q=60&fm=webp 800w, https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=1200&q=60&fm=webp 1200w" />
              <img
                class="lazy-img"
                data-src="https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=800&q=60"
                data-srcset="https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=400&q=60 400w, https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=800&q=60 800w, https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=1200&q=60 1200w"
                data-sizes="(max-width:720px) 100vw, 33vw"
                width="800" height="450"
                alt="Media 1"
                loading="lazy"
                decoding="async"
                style="max-width:100%;height:auto;display:block;background:#f3f4f6;"
                src="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='9' viewBox='0 0 16 9'%3E%3Crect width='16' height='9' fill='%23f3f4f6'/%3E%3C/svg%3E">
            </picture>
          </div>

          <div class="media-card" aria-label="Media card 2">
            <picture>
              <source type="image/avif" data-srcset="https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=400&q=60&fm=avif 400w, https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=800&q=60&fm=avif 800w" />
              <source type="image/webp" data-srcset="https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=400&q=60&fm=webp 400w, https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=800&q=60&fm=webp 800w" />
              <img
                class="lazy-img"
                data-src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=800&q=60"
                data-srcset="https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=400&q=60 400w, https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=800&q=60 800w"
                data-sizes="(max-width:720px) 100vw, 33vw"
                width="800" height="450"
                alt="Media 2"
                loading="lazy"
                decoding="async"
                style="max-width:100%;height:auto;display:block;background:#f3f4f6;"
                src="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='9' viewBox='0 0 16 9'%3E%3Crect width='16' height='9' fill='%23f3f4f6'/%3E%3C/svg%3E">
            </picture>
          </div>

          <div class="media-card" aria-label="Media card 3">
            <video controls poster="https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1200&q=60" preload="none" style="width:100%;height:100%;object-fit:cover;">
              <source src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
        </div>

        <div class="media-large" aria-label="Large media display">
          <picture>
            <source type="image/avif" data-srcset="https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=800&q=60&fm=avif 800w, https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1200&q=60&fm=avif 1200w, https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1600&q=60&fm=avif 1600w" />
            <source type="image/webp" data-srcset="https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=800&q=60&fm=webp 800w, https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1200&q=60&fm=webp 1200w, https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1600&q=60&fm=webp 1600w" />
            <img
              class="lazy-img"
              data-src="https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1600&q=60"
              data-srcset="https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=800&q=60 800w, https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1200&q=60 1200w, https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1600&q=60 1600w"
              data-sizes="(max-width:720px) 100vw, 1000px"
              width="1600" height="900"
              alt="Large media"
              loading="lazy"
              decoding="async"
              style="max-width:100%;height:auto;display:block;background:transparent;"
              src="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='9' viewBox='0 0 16 9'%3E%3Crect width='16' height='9' fill='%23f3f4f6'/%3E%3C/svg%3E">
          </picture>
        </div>
      </section>

      <!-- Modal for project details and image gallery -->
      <div class="overlay" id="overlay" aria-hidden="true">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
          <div class="gallery" id="gallery">
            <div class="main-wrap" id="mainWrap">
              <button class="close" id="closeBtn" aria-label="Close">Close</button>

              <div class="nav" aria-hidden="false">
                <button class="arrow" id="prevBtn" aria-label="Previous">‹</button>
                <button class="arrow" id="nextBtn" aria-label="Next">›</button>
              </div>

              <!-- Stage: sliding media items are appended here -->
              <div id="galleryStage" class="stage" aria-live="polite"></div>
            </div>

            <div class="thumbs" id="thumbs" aria-hidden="false"></div>
          </div>

          <div class="details">
            <h3 id="modal-title">Project Title</h3>
            <p id="modal-desc" style="color:var(--muted)"></p>

            <!-- Default highlights block (will be replaced by per-project highlights if provided) -->
            <div id="default-highlights" style="margin-top:12px;">
              <strong style="display:block; margin-bottom:8px">Highlights</strong>
              <ul style="color:var(--muted); margin-top:0">
                <li>Research and user interviews</li>
                <li>Interactive prototypes</li>
                <li>Final UI and handoff</li>
              </ul>
            </div>

            <div style="margin-top:14px;">
              <button id="modal-close-2" style="margin-left:8px; padding:8px 12px; border-radius:8px; border:1px solid rgba(0,0,0,0.06); background:#fff; cursor:pointer;">Close</button>
            </div>
          </div>
        </div>
      </div>

      <footer>
        © <span id="year"></span> Your Name. All rights reserved.
      </footer>
    </div>

    <script>
      (function(){
        // Populate year
        document.getElementById('year').textContent = new Date().getFullYear();

        // Elements for modal/gallery and controls
        const overlay = document.getElementById('overlay');
        const galleryStage = document.getElementById('galleryStage');
        const modalTitle = document.getElementById('modal-title');
        const modalDesc = document.getElementById('modal-desc');
        const closeBtn = document.getElementById('closeBtn');
        const modalClose2 = document.getElementById('modal-close-2');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const thumbs = document.getElementById('thumbs');
        const detailsPanel = document.querySelector('.modal .details');
        const defaultHighlights = document.getElementById('default-highlights');

        let currentImages = [];
        let currentIndex = 0;
        let lastFocused = null;

        // ---------- Lazy-load CSS background images ----------
        const lazyBackgrounds = [].slice.call(document.querySelectorAll('.media[data-bg]'));
        if('IntersectionObserver' in window && lazyBackgrounds.length){
          const bgObserver = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
              if(entry.isIntersecting){
                const el = entry.target;
                const url = el.getAttribute('data-bg');
                if(url){
                  el.style.backgroundImage = `url('${url}')`;
                  el.removeAttribute('data-bg');
                }
                obs.unobserve(el);
              }
            });
          }, {rootMargin: '200px 0px'});
          lazyBackgrounds.forEach(el => bgObserver.observe(el));
        } else {
          // fallback: load all immediately
          lazyBackgrounds.forEach(el => {
            const url = el.getAttribute('data-bg');
            if(url) el.style.backgroundImage = `url('${url}')`;
            el.removeAttribute('data-bg');
          });
        }

        // ---------- Lazy-load <img> sources for picture elements ----------
        const lazyImgs = [].slice.call(document.querySelectorAll('img.lazy-img'));
        if('IntersectionObserver' in window && lazyImgs.length){
          const imgObserver = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
              if(entry.isIntersecting){
                const img = entry.target;
                const src = img.getAttribute('data-src');
                const srcset = img.getAttribute('data-srcset');
                if(srcset) img.setAttribute('srcset', srcset);
                if(src) img.setAttribute('src', src);
                img.classList.remove('lazy-img');
                obs.unobserve(img);
              }
            });
          }, {rootMargin: '200px 0px'});
          lazyImgs.forEach(i => imgObserver.observe(i));
        } else {
          lazyImgs.forEach(img => {
            const src = img.getAttribute('data-src');
            const srcset = img.getAttribute('data-srcset');
            if(srcset) img.setAttribute('srcset', srcset);
            if(src) img.setAttribute('src', src);
            img.classList.remove('lazy-img');
          });
        }

        // ---------- Gallery rendering helpers ----------
        function clearGallery(){
          galleryStage.innerHTML = '';
          thumbs.innerHTML = '';
          currentImages = [];
          currentIndex = 0;
        }

        function buildGallery(images){
          clearGallery();
          images.forEach((src, i) => {
            // main stage item
            const item = document.createElement('div');
            item.className = 'media-item';
            item.style.transform = `translateX(${i * 100}%)`;
            const img = document.createElement('img');
            img.src = src;
            img.alt = `Image ${i+1}`;
            item.appendChild(img);
            galleryStage.appendChild(item);

            // thumb
            const t = document.createElement('div');
            t.className = 'thumb';
            t.style.backgroundImage = `url('${src}')`;
            t.dataset.index = i;
            t.addEventListener('click', () => {
              goToIndex(i);
            });
            thumbs.appendChild(t);
            currentImages.push(src);
          });
          updateThumbs();
        }

        function updateThumbs(){
          const nodes = thumbs.querySelectorAll('.thumb');
          nodes.forEach(n => n.classList.remove('active'));
          const active = thumbs.querySelector(`.thumb[data-index="${currentIndex}"]`);
          if(active) active.classList.add('active');
        }

        function goToIndex(idx){
          const items = galleryStage.querySelectorAll('.media-item');
          items.forEach((it, i) => {
            it.style.transform = `translateX(${(i - idx) * 100}%)`;
          });
          currentIndex = idx;
          updateThumbs();
        }

        prevBtn.addEventListener('click', () => {
          if(currentImages.length === 0) return;
          const next = (currentIndex - 1 + currentImages.length) % currentImages.length;
          goToIndex(next);
        });
        nextBtn.addEventListener('click', () => {
          if(currentImages.length === 0) return;
          const next = (currentIndex + 1) % currentImages.length;
          goToIndex(next);
        });

        // ---------- Highlights rendering and modal open/close ----------
        function renderHighlights(highlightsArray){
          // Hide default highlights
          const defaultBlock = document.getElementById('default-highlights');
          if(defaultBlock) defaultBlock.style.display = 'none';

          // Remove any previous custom highlights container
          const prev = document.querySelector('.modal .details .highlights-list');
          if(prev) prev.remove();

          // Create container
          const listWrap = document.createElement('div');
          listWrap.className = 'highlights-list';
          const title = document.createElement('strong');
          title.textContent = 'Highlights';
          title.style.display = 'block';
          title.style.marginBottom = '8px';
          listWrap.appendChild(title);

          const ul = document.createElement('ul');
          ul.style.marginTop = '0';
          ul.style.paddingLeft = '18px';
          ul.style.color = 'var(--muted)';

          highlightsArray.forEach(item => {
            const li = document.createElement('li');
            li.textContent = item;
            ul.appendChild(li);
          });

          listWrap.appendChild(ul);
          // Append to details panel
          const details = document.querySelector('.modal .details');
          details.appendChild(listWrap);
        }

        function openProjectModal(projectEl){
          // store last focused element for accessibility
          lastFocused = document.activeElement;

          // title & desc
          const title = projectEl.getAttribute('data-title') || 'Project';
          const desc = projectEl.getAttribute('data-desc') || '';
          modalTitle.textContent = title;
          modalDesc.textContent = desc;

          // parse images and build gallery
          const rawImages = projectEl.getAttribute('data-images');
          if(rawImages){
            try{
              const imgs = JSON.parse(rawImages);
              if(Array.isArray(imgs) && imgs.length){
                buildGallery(imgs);
                goToIndex(0);
              } else {
                clearGallery();
              }
            } catch(e){
              clearGallery();
            }
          } else {
            clearGallery();
          }

          // parse highlights if present
          const rawHighlights = projectEl.getAttribute('data-highlights');
          if(rawHighlights){
            try{
              const highlights = JSON.parse(rawHighlights);
              if(Array.isArray(highlights) && highlights.length){
                renderHighlights(highlights);
              } else {
                const defaultBlock = document.getElementById('default-highlights');
                if(defaultBlock) defaultBlock.style.display = 'block';
              }
            } catch(e){
              const defaultBlock = document.getElementById('default-highlights');
              if(defaultBlock) defaultBlock.style.display = 'block';
            }
          } else {
            const defaultBlock = document.getElementById('default-highlights');
            if(defaultBlock) defaultBlock.style.display = 'block';
          }

          // open overlay
          overlay.classList.add('open');
          overlay.setAttribute('aria-hidden', 'false');

          // focus management
          const close = document.getElementById('closeBtn');
          if(close) close.focus();
        }

        // Wire up click handlers for project items
        document.querySelectorAll('.project').forEach(p => {
          p.addEventListener('click', () => openProjectModal(p));
          // also allow keyboard activation
          p.setAttribute('tabindex', '0');
          p.addEventListener('keydown', (e) => {
            if(e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              openProjectModal(p);
            }
          });
        });

        // Close handlers
        function closeModal(){
          overlay.classList.remove('open');
          overlay.setAttribute('aria-hidden', 'true');
          // restore default highlights visibility
          const defaultBlock = document.getElementById('default-highlights');
          if(defaultBlock) defaultBlock.style.display = 'block';
          // remove custom highlights if any
          const prev = document.querySelector('.modal .details .highlights-list');
          if(prev) prev.remove();
          // clear gallery
          clearGallery();
          // restore focus
          if(lastFocused) lastFocused.focus();
        }

        closeBtn.addEventListener('click', closeModal);
        modalClose2.addEventListener('click', closeModal);

        // close when clicking outside modal content
        overlay.addEventListener('click', (e) => {
          if(e.target === overlay) closeModal();
        });

        // keyboard navigation
        document.addEventListener('keydown', (e) => {
          if(overlay.classList.contains('open')){
            if(e.key === 'Escape') closeModal();
            if(e.key === 'ArrowLeft') prevBtn.click();
            if(e.key === 'ArrowRight') nextBtn.click();
          }
        });

        // Prevent focus from escaping modal (basic trap)
        document.addEventListener('focus', function(event){
          if(overlay.classList.contains('open')){
            const modal = document.querySelector('.modal');
            if(modal && !modal.contains(event.target)){
              event.stopPropagation();
              modal.querySelector('button, [tabindex]')?.focus();
            }
          }
        }, true);

      })();
    </script>
  </body>
</html>
